<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Artist List</title>
    <link rel="stylesheet" href="../assets/style.css">
</head>
<body>
    <div class="search-continer">
      <input type="text" id="search" placeholder="search..." oninput="showSuggestions(this.value)">
        <div id="suggestions"></div>
    </div>
    <div class="global">
        {{range .}}
        <div class="box">
            <div class="image" style="background-image: url('{{.Image}}');"></div>
            <a href="artists/{{.ID}}"><button>{{.Name}}</button></a>
        </div>
        {{end}}
    </div>

<section class="cart-art">
    <div class="data">
        {{ range .}}
        <a href="/profil?id={{ .ID }}">
            <div>
                <img src="{{.Image}}" alt="{{ .Name}}" class="Image"><br>
                <span class="name">{{ .Name }}</span><br>
                <span class="CreationDate">{{ .CreationDate}}</span><br>
                <span class="FirstAlbum">{{ .FirstAlbum}}</span>
            </div>
        </a>
        {{ end }}
    </div>
</section>
<script>
    function showSuggestions(query) {
        if (query.length == 0) {
            document.getElementById("suggestions").innerHTML = "";
            return;
        }
        fetch(`/search?s=${query}`)
            .then(response => response.json())
            .then(data => {
                let suggestions = data.map(item => 
                    `<div><a href="/profil?id=${item.id}">${item.name} - ${item.type}</a></div>`
                ).join('');
                document.getElementById("suggestions").innerHTML = suggestions;
            });
    }
    
    </script>
    <br>
    
</body>
</html>
